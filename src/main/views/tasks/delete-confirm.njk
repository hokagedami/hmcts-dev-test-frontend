{% extends "template.njk" %}

{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}

{% block pageTitle %}Delete Task - Task Management{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "/tasks/" + task.id
  }) }}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-xl">Are you sure you want to delete this task?</h1>

    {{ govukWarningText({
      text: "This action cannot be undone. The task will be permanently deleted.",
      iconFallbackText: "Warning"
    }) }}

    <h2 class="govuk-heading-m">Task details</h2>

    <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Title</dt>
        <dd class="govuk-summary-list__value">{{ task.title }}</dd>
      </div>
      {% if task.description %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Description</dt>
        <dd class="govuk-summary-list__value">{{ task.description }}</dd>
      </div>
      {% endif %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Status</dt>
        <dd class="govuk-summary-list__value">{{ task.statusDisplay }}</dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Priority</dt>
        <dd class="govuk-summary-list__value">{{ task.priorityDisplay }}</dd>
      </div>
    </dl>

    <form method="post" action="/tasks/{{ task.id }}/delete">
      <div style="display: flex; gap: 15px; align-items: flex-start;">
        {{ govukButton({
          text: "Delete task",
          classes: "govuk-button--warning govuk-!-margin-bottom-0"
        }) }}

        <a href="/tasks/{{ task.id }}" class="govuk-button govuk-button--secondary govuk-!-margin-bottom-0">Cancel</a>
      </div>
    </form>

  </div>
</div>
{% endblock %}
